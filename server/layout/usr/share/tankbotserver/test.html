<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset=utf-8 http-equiv="Content-Language" content="en"/>
 <title>Tankbot interface</title>
<style type="text/css">
	.content { vertical-align:top; text-align:center; background:#fffff0; padding:12px; }
</style>
</head>

<body>
<header></header>

<table class="content">
	<tr>
		<td id="statustd" align="center" class="explain"><div id="status">Not initialized</div></td>
	</tr>
</table>

<script>

var socket_lm = new WebSocket("ws://"+ document.URL.substr(7).split('/')[0], "tankbot");

try {
	socket_lm.onopen = function() {
		document.getElementById("statustd").style.backgroundColor = "#40ff40";
		document.getElementById("status").textContent = " websocket connection opened ";
	}

	socket_lm.onmessage = function got_packet(packet) {
		var data = JSON.parse(packet.data);

		if (data.type == 'm')
			alert(data.value);
	}

	socket_lm.onclose = function(){
		document.getElementById("statustd").style.backgroundColor = "#ff4040";
		document.getElementById("status").textContent = " websocket connection CLOSED ";
	}
} catch(exception) {
	alert('Error' + exception);
}

</script>

</body>
</html>
